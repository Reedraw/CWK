<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="styles.css"> -->
    <title>Profile</title>

    <style>
        @import url(http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300ita‌​lic,400italic,500,500italic,700,700italic,900italic,900);
        html, body, html * {
        font-family: 'Roboto', sans-serif;
        }

        body{
            background-color: lightgray;
        }

        #start-button{
            margin: auto;
            display: block;

            background-color: #04AA60;
            border: none;
            color: white;
            padding: 15px 45px;
            text-align: center;
            text-decoration: none;
            font-size: 16px;
            margin-bottom: 10px;
        }

        #start-button:hover{
            background-color: #008CBA;
        }

        .question-navigation{
            position: relative;
            margin: auto;
            display: none;
            justify-content: space-between;
            width: 1000px;
            height: 30px;
            margin-bottom: 10px;
        }

        .question-nav-button{
            background-color: #008CBA;
            border: none;
            flex: 1;
            margin: 5px;
            height: 20px;
            width: 75px;
        }

        .question-nav-button:hover{
            background-color: #04AA60;
        }

        .container{
            position: relative;
            display: none;
            margin: auto;
            width: 800px;
            height: 300px;
            border: 1px solid black;
            margin-bottom: 10px;
        }

        .container1-bottom-buttons{
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
        }

        .container1-bottom-buttons button{
            margin: 0 5px;
        }

        .inner-prompt-section{
            border: 1px solid black;
            width: 500px;
            height: 100px;
        }

        .prompt-section{
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            border: none;
        }

        .prompt-section p, .prompt-section div{
            margin: 0;
            padding: 10px;
        }

        #next-button{
            background-color: #04AA60;
            border: none;
            color: white;
            padding: 15px 45px;
            text-align: center;
            text-decoration: none;
            font-size: 16px;
            margin-bottom: 10px;
        }

        #next-button:hover{
            background-color: #008CBA;
        }

        #skip-button{
            background-color: #04AA60;
            border: none;
            color: white;
            padding: 15px 45px;
            text-align: center;
            text-decoration: none;
            font-size: 16px;
            margin-bottom: 10px;
        }

        #skip-button:hover{
            background-color: #008CBA;
        }

        .container-2{
            display: none;
            margin: auto;
            width: 200px;
            height: 50px;
        }

        .container-3{
            display: none;
            margin: auto;
            border: 1px solid black;
            width: 400px;
            height: 350px;
        }

        /* Navigation bar styles */
        nav {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 10px 0;
            position: fixed;
            top: 0;
            width: 100%;
            left: 0px;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            transition: background-color 0.3s;
        }

        nav a:hover {
            background-color: #555;
        }
        .dropdown{
            display: none;
            position: fixed;
            margin-top: -10px;
            background-color: white;
            border: 1px solid white;
            width: 200px;
            height: 100px;
            margin-left: 51.9%;
        }

        .dropdown a{
            display: block;
            margin-left: 2px;
            color: black;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <nav>
        <a href="https://w1970083.users.ecs.westminster.ac.uk/webDev/home.html">Home</a>
        <a href="https://w2045735.users.ecs.westminster.ac.uk/webdev/shop.html">Shop</a>
        <a href="https://w1968139.users.ecs.westminster.ac.uk/webDev/profile.html">User Profile</a>
        <a href="https://w1968139.users.ecs.westminster.ac.uk/webDev/team.html">Team</a>
        <a id="content-dropdown">Content Page</a>
        <a href="https://w1970083.users.ecs.westminster.ac.uk/webDev/feedback.html">Feedback Form</a>
    </nav>
    
    <div class="dropdown">
        <a href="https://w2045735.users.ecs.westminster.ac.uk/webdev/content_ST1.html">Nutrition</a><br>
        <a href="https://w1970083.users.ecs.westminster.ac.uk/webDev/content_ST2.html">Mental Health</a><br>
        <a href="https://w1968139.users.ecs.westminster.ac.uk/webDev/content_ST3.html">Exercise</a>
    </div>

    <h1 style="margin-top: 50px;">Build User Profile - Healthy Lifestyle!</h1>
    <button id="start-button" type="button">Start!</button>

    <div class="question-navigation" id="question-bar">
        <button class="question-nav-button" id="P1Q1">Q1</button>
        <button class="question-nav-button" id="P1Q2">Q2</button>
        <button class="question-nav-button" id="P1Q3">Q3</button>
        <button class="question-nav-button" id="P2Q1">Q4</button>
        <button class="question-nav-button" id="P2Q2">Q5</button>
        <button class="question-nav-button" id="P2Q3">Q6</button>
        <button class="question-nav-button" id="P3Q1">Q7</button>
        <button class="question-nav-button" id="P3Q2">Q8</button>
        <button class="question-nav-button" id="P3Q3">Q9</button>
    </div>

    <div class="container">
        <p id="prompt-title">STEP 1 - Personal Details | Question 1/4</p>
        <div class="prompt-section">
            <p>Prompt</p>
            <div class="inner-prompt-section">
                <p id="prompt-text">Your Name:</p>
                <input type="text" id="text-box" name="text-box">
                <!-- Update using JavaScript -->
            </div>
        </div>
        <div class="container1-bottom-buttons">
            <button id="next-button">Next</button>
            <button id="skip-button">Skip</button>
        </div>
    </div>

    <div class="container-2">
        <label for="profile-progress">Profile Progress:</label>
        <progress id="profile-progress" value="0" max="99"></progress>
    </div>    

    <div class="container-3">
        <p>Output:</p>
        <div id="output">
            <!-- Placeholder for displaying user output -->
        </div>
    </div>

    <script>
        const prompts =[
            //Personal Details
            ["What's your full name?", "How old are you!", "What's your gender?"],
            //Health Habits
            ["How would you describe your current physical activity level?", "Do you have any dietary preferences or restrictions?", "On average, how many hours of sleep do you get per night?"],
            //Wellness Goals
            ["What are your primary health and wellness goals?", "Are there any specific challenges you face in maintaining a healthy lifestyle?", "How motivated are you to make positive changes in your lifestyle?"]
        ];

        let currentPrompt = 0;
        let currentStep = 0;
        let nextcounter = 0;
        let currentQuestion = 1;
        let barValue = 0

        const promptText = document.getElementById("prompt-text");
        const progressBar = document.getElementById("profile-progress")
        const promptTitle = document.getElementById("prompt-title");
        const promptTextBox = document.getElementById("text-box")
        const nextButton = document.getElementById("next-button");
        const skipButton = document.getElementById("skip-button");
        const startButton = document.getElementById("start-button")
        const outputDiv = document.getElementById("output");
        const container = document.querySelector(".container")
        const container2= document.querySelector(".container-2")
        const container3 = document.querySelector(".container-3")
        const navButtons = document.querySelectorAll(".question-nav-button");
        const questionBar = document.getElementById("question-bar")

        var contentDropdown = document.getElementById('content-dropdown');
        var dropdown = document.querySelector('.dropdown');

        promptTitle.textContent = "STEP 1 - Personal Details | Question 1/3";

        function displayPrompts(){
            console.log(promptText);
            console.log("Current Prompt: " + currentPrompt);
            console.log("Current Step: " + currentStep);
            console.log("Current next counter: " + nextcounter);
            promptTextBox.value = "";
            promptText.textContent = prompts[currentPrompt][currentStep];
            if (nextcounter == 3){
                currentPrompt++;
                currentQuestion = 1;
                currentStep = 0;
                promptTitle.textContent = `STEP 2 - Health Habits | Question ${currentQuestion}/${prompts.length}`
                promptText.textContent = prompts[currentPrompt][currentStep];
            } else if (nextcounter == 6){
                currentPrompt++;
                currentQuestion = 1;
                currentStep = 0;
                promptTitle.textContent = `STEP 3 - Wellness Goals | Question ${currentQuestion}/${prompts.length}`
                promptText.textContent = prompts[currentPrompt][currentStep];
            } else if (currentStep < prompts.length){
                promptTitle.textContent = `STEP 1 - Personal Details | Question ${currentQuestion}/${prompts.length}`
                if (nextcounter >= 6){
                    promptTitle.textContent = `STEP 3 - Wellness Goals | Question ${currentQuestion}/${prompts.length}`
                } else if (nextcounter >= 4){
                    promptTitle.textContent = `STEP 2 - Health Habits | Question ${currentQuestion}/${prompts.length}`
                }
            } else {
                promptText.textContent = "Profile completed! Thank you!";
                nextButton.disabled = true;
                skipButton.disabled = true;
                progressBar.value = 100;
                setTimeout(function() {
                    window.location.href = "https://w1970083.users.ecs.westminster.ac.uk/webDev/home.html"; // Replace "https://example.com" with the URL of the page you want to redirect to
                }, 2000); // 3000 milliseconds = 3 seconds
            }
        }

        function updateOutput(inputValue){
            const outputItem = document.createElement("p");
            outputItem.textContent = inputValue;
            outputDiv.appendChild(outputItem);
        }

        startButton.addEventListener("click", () => {
            container.style.display = "block";
            container2.style.display = "block";
            container3.style.display = "block";
            questionBar.style.display = "flex";
        });

        nextButton.addEventListener("click", () => {
            currentStep++;
            nextcounter++;
            currentQuestion++;
            barValue += 11;
            progressBar.value = barValue
            console.log(promptTextBox.value);
            const inputValue = promptTextBox.value;
            updateOutput(inputValue);
            displayPrompts();
        });

        skipButton.addEventListener("click", () => {
            currentStep++;
            nextcounter++;
            currentQuestion++;
            barValue += 11;
            progressBar.value = barValue
            promptTextBox.value = "N/A"
            const inputValue = promptTextBox.value
            updateOutput(inputValue);
            displayPrompts();
        });

        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                const questionNumber = button.getAttribute('id');
                console.log(`Button ${questionNumber} clicked!`);
                if (questionNumber == 'P1Q1'){
                    currentPrompt = 0;
                    currentStep = 0;
                    currentQuestion = 1;
                    nextcounter = 0;
                    barValue = 0;
                    progressBar.value += barValue
                    displayPrompts();
                } else if (questionNumber == 'P1Q2'){
                    currentPrompt = 0;
                    currentStep = 1;
                    currentQuestion = 2;
                    nextcounter = 1;
                    barValue = 0;
                    progressBar.value += barValue
                    displayPrompts();
                } else if (questionNumber == 'P1Q3'){
                    currentPrompt = 0;
                    currentStep = 2;
                    currentQuestion = 3;
                    nextcounter = 2;
                    barValue = 0;
                    progressBar.value += barValue
                    displayPrompts();
                } else if (questionNumber == 'P2Q1'){
                    currentPrompt = 1;
                    currentStep = 0;
                    currentQuestion = 1;
                    nextcounter = 3;
                    barValue = 0;
                    progressBar.value += barValue
                    displayPrompts();
                } else if (questionNumber == 'P2Q2'){
                    currentPrompt = 1;
                    currentStep = 1;
                    currentQuestion = 2;
                    nextcounter = 4;
                    barValue = 0;
                    progressBar.value += barValue
                    displayPrompts();
                } else if (questionNumber == 'P2Q3'){
                    currentPrompt = 1;
                    currentStep = 2;
                    currentQuestion = 3;
                    nextcounter = 5;
                    barValue = 0;
                    progressBar.value += barValue
                    displayPrompts();
                } else if (questionNumber == 'P3Q1'){
                    currentPrompt = 2;
                    currentStep = 0;
                    currentQuestion = 1;
                    nextcounter = 6;
                    barValue = 0;
                    progressBar.value += barValue
                    displayPrompts();
                } else if (questionNumber == 'P3Q2'){
                    currentPrompt = 2;
                    currentStep = 1;
                    currentQuestion = 2;
                    nextcounter = 7;
                    barValue = 0;
                    progressBar.value += barValue
                    displayPrompts();
                } else if (questionNumber == 'P3Q3'){
                    currentPrompt = 2;
                    currentStep = 2;
                    currentQuestion = 3;
                    nextcounter = 8;
                    barValue = 0;
                    progressBar.value += barValue
                    displayPrompts();
                }
            });
        });

        contentDropdown.addEventListener('mouseover', function() {
            dropdown.style.display = 'block';
        });

        dropdown.addEventListener('mouseover', function() {
            dropdown.style.display = 'block';
        });

        dropdown.addEventListener('mouseout', function(event) {
            // Check if the mouseout event is not triggered when moving from the contentDropdown to the dropdown
            if (!contentDropdown.contains(event.relatedTarget)) {
                dropdown.style.display = 'none';
            }
        });

        displayPrompts();
    </script>
</body>
</html>